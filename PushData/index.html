<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Display CSV Data</title>
</head>
<body>
    <h1>CSV Data</h1>
    <pre id="csvOutput">Loading...</pre> <!-- Default text while loading -->

    <script>
        // Function to decode URL components and parse CSV
        function getCsvFromUrl() {
            const url = 'https://landenbarker.com/PushData?sheet=Sheet1&data=ID,First%20Name,Last%20Name,StuCo%20Points%0A1010902,Landen,Barker,15';
            
            // Extract the CSV string from the URL
            const urlParams = new URLSearchParams(new URL(url).search);
            const dataParam = urlParams.get('data');

            if (dataParam) {
                try {
                    // Decode the URL-encoded CSV data
                    const decodedData = decodeURIComponent(dataParam);
                    
                    // Convert CSV to a more readable format
                    const csvLines = decodedData.split('\n');
                    const headers = csvLines[0].split(',');
                    const rows = csvLines.slice(1).map(line => line.split(','));

                    // Format CSV data for display
                    let csvDisplay = headers.join(' | ') + '\n' + rows.map(row => row.join(' | ')).join('\n');
                    
                    // Display CSV in the pre element
                    document.getElementById('csvOutput').textContent = csvDisplay;
                } catch (e) {
                    document.getElementById('csvOutput').textContent = 'Error processing CSV: ' + e.message;
                }
            } else {
                document.getElementById('csvOutput').textContent = 'No data parameter found in URL.';
            }
        }

        // Run the function to display CSV data
        getCsvFromUrl();
    </script>
</body>
</html>
